Moblin v2 - JHBuild
===============================================================================

moblin2-tools is a repository containing scripts a jhbuild modules for the
build and use of the Moblin v2 user shell and related libraries.

Initialization
-------------------------------------------------------------------------------

You should check out JHBuild from the GNOME Subversion repository:

  svn co http://svn.gnome.org/svn/jhbuild/trunk jhbuild

Then build it and install it.

From within the moblin2-jhbuild repository run:

  make install

This command will install:

  - jhbuild-moblin2             - a wrapper around jhbuild
  - $HOME/.jhbuildrc-moblin2    - a jhbuild configuration file

Building the Moblin v2 shell
-------------------------------------------------------------------------------

To build the whole Moblin v2 UI:

  jhbuild-moblin2 build

This will also take care of the dependencies.

The modules will be downloaded under $HOME/moblin2/source.
The modules will be installed under $HOME/moblin2/install

Launching the Moblin v2 shell
-------------------------------------------------------------------------------

To launch the Moblin v2 shell under Xephyr you should start Xephyr using:

  Xephyr :1 -screen 1024x600 -host-cursor -ac

Then enter the jhbuild shell using:

  jhbuild-moblin2 shell

And run the start-in-xephyr.sh script:

  /path/to/moblin2-jhbuild/build/launch-in-xephyr.sh

Common issues
-------------------------------------------------------------------------------

Q: Why jhbuild can't find the moblin2 modules file?
A: If jhbuild cannot find the moblin2.modules file you should edit the
jhbuildrc-moblin2 configuration file, on the

  moduleset

line. Using an absolute path usually works.

Q: Why doesn't Mojito (com.intel.Mojito D-Bus service) start?
A: In order to activate a D-Bus service installed within the JHBuild
root you have to modify the /etc/dbus-1/session.conf file by adding
the following line:

  <servicedir>@PREFIX@/moblin2/install/share/dbus-1/services</servicedir>

Where @PREFIX@ is the prefix used by JHBuild -- the user's home directory
by default.

You will have to restart D-Bus, which usually means logging out or a
complete reboot.
